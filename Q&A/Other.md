# Java面试问题

### 1. HashMap 为什么是线程不安全的 

因为在HashMap的源码中并没有添加关于多线程访问的同步机制，所以在并发访问HashMap中的数据时会出现线程安全问题引发内部存储的数据不符合预期

### 2.HashMap的扩容机制

> 回答点：
>
> * HashMap数据结构简单描述
> * HashMap关于扩容的几个关键属性及其默认值
> * 扩容时的具体操作

首先HashMap是基于哈希表结构的Map接口的非线程安全实现。HashMap的底层数据结构为数组，在其数组中每个位置存储的是一个链表或者树（红黑树）。

HashMap在创建的时候其默认容量 (capacity)是16，默认的负载因子(loadFactor)是0.75，也就是说其阈值(threshold)是12，即当元素数量达到12的时候就会触发扩容。

当HashMap进行扩容时，其新容量的计算方式为原有容量 * 2 ，及为原来容量的两倍，当然这个扩容也不是无限扩大的其最大的容量就是int的最大值。

在确定完新容量后，就会生成一个新的空的hash表，HashMap再会去遍历现有的元素，然后计算每个元素在扩容后新的hash表的新位置，再把原有元素按照新位置迁移到新的Hash表，就完成了扩容

### 3.ConcurrentHashMap为什么可以保证线程安全

ConcurrentHashMap 的底层数据结构实现与 HashMap 一样，都是使用数组+链表(或者红黑树)。那么ConcurrentHashMap 在保证线程安全是采用了对数组节点加锁的方式保证线程安装，即在修改ConcurrentHashMap中的数据时，会首先计算需要修改元素的Hash值确认其在数组中的位置，然后对该位置进行加锁保证，对该位置数据修改是同步，同时对于Hash值不同的元素的数据变动也不会影响，即保证了线程安全，也不会损失太多的执行效率（相对HashTable来说）







